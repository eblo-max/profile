"""
–ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–æ—Ñ–∞–π–ª–µ—Ä–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ - 28 –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ 6 –±–ª–æ–∫–∞—Ö
–û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º –∑–∞–¥–∞–Ω–∏–∏ —Å –Ω–∞—É—á–Ω—ã–º –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º
"""

from typing import Dict, List, Any, Tuple
from app.utils.enums import UrgencyLevel


# =================================
# –ë–õ–û–ö 1: –ù–ê–†–¶–ò–°–°–ò–ó–ú –ò –ì–†–ê–ù–î–ò–û–ó–ù–û–°–¢–¨ (6 –≤–æ–ø—Ä–æ—Å–æ–≤ - —É–±—Ä–∞–ª narcissism_q7)
# =================================

NARCISSISM_QUESTIONS = {
    "narcissism_q1": {
        "id": "narcissism_q1",
        "block": "narcissism",
        "weight": 3,  # –í—ã—Å–æ–∫–∏–π –≤–µ—Å
        "text": "–ö–∞–∫ –≤–∞—à –ø–∞—Ä—Ç–Ω–µ—Ä —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∫—Ä–∏—Ç–∏–∫—É –∏–ª–∏ –∑–∞–º–µ—á–∞–Ω–∏—è?",
        "context": "–û—Ü–µ–Ω–∏—Ç–µ —Ç–∏–ø–∏—á–Ω—É—é —Ä–µ–∞–∫—Ü–∏—é –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –Ω–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—É—é –∫—Ä–∏—Ç–∏–∫—É",
        "options": [
            "–í—ã—Å–ª—É—à–∏–≤–∞–µ—Ç —Å–ø–æ–∫–æ–π–Ω–æ –∏ –±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç –∑–∞ –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å",
            "–ú–æ–∂–µ—Ç —Ä–∞—Å—Å—Ç—Ä–æ–∏—Ç—å—Å—è, –Ω–æ –ø–æ—Ç–æ–º –æ–±–¥—É–º—ã–≤–∞–µ—Ç —Å–∫–∞–∑–∞–Ω–Ω–æ–µ",
            "–ó–∞—â–∏—â–∞–µ—Ç—Å—è –∏ –æ–ø—Ä–∞–≤–¥—ã–≤–∞–µ—Ç—Å—è, –Ω–µ –ø—Ä–∏–Ω–∏–º–∞—è –∫—Ä–∏—Ç–∏–∫—É",
            "–†–∞–∑–¥—Ä–∞–∂–∞–µ—Ç—Å—è –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ –∫–æ–Ω—Ç—Ä–∞—Ç–∞–∫—É",
            "–ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ –æ—Ç–≤–µ—Ä–≥–∞–µ—Ç –∫—Ä–∏—Ç–∏–∫—É –∏ –æ–±–≤–∏–Ω—è–µ—Ç –≤ –æ—Ç–≤–µ—Ç"
        ],
        "weights": [0, 1, 2, 3, 4]
    },
    
    "narcissism_q2": {
        "id": "narcissism_q2",
        "block": "narcissism",
        "weight": 3,
        "text": "–ö–∞–∫ –≤–∞—à –ø–∞—Ä—Ç–Ω–µ—Ä –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ —á—É–∂–∏–º —É—Å–ø–µ—Ö–∞–º?",
        "context": "–†–µ–∞–∫—Ü–∏—è –Ω–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –¥—Ä—É–∑–µ–π, –∫–æ–ª–ª–µ–≥ –∏–ª–∏ –≤–∞—Å",
        "options": [
            "–ò—Å–∫—Ä–µ–Ω–Ω–µ —Ä–∞–¥—É–µ—Ç—Å—è –∏ –ø–æ–∑–¥—Ä–∞–≤–ª—è–µ—Ç",
            "–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ—Ç, –Ω–æ —Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–≤–∏—Å—Ç—å—é",
            "–†–∞–≤–Ω–æ–¥—É—à–µ–Ω –∫ —á—É–∂–∏–º —É—Å–ø–µ—Ö–∞–º",
            "–û–±–µ—Å—Ü–µ–Ω–∏–≤–∞–µ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∏–ª–∏ –Ω–∞—Ö–æ–¥–∏—Ç –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏",
            "–ó–ª–∏—Ç—Å—è –∏ —Å—á–∏—Ç–∞–µ—Ç, —á—Ç–æ –µ–º—É –≤–µ–∑–µ—Ç –º–µ–Ω—å—à–µ"
        ],
        "weights": [0, 1, 2, 3, 4]
    },
    
    "narcissism_q3": {
        "id": "narcissism_q3",
        "block": "narcissism", 
        "weight": 3,
        "text": "–ö–∞–∫ –≤–∞—à –ø–∞—Ä—Ç–Ω–µ—Ä –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å–µ–±—è –≤ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞—Ö?",
        "context": "–°–∞–º–æ–≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ –∏ —Å–∞–º–æ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è",
        "options": [
            "–°–∫—Ä–æ–º–Ω–æ, –Ω–µ –≤—ã–ø—è—á–∏–≤–∞—è —Å–≤–æ–∏ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞",
            "–£–≤–µ—Ä–µ–Ω–Ω–æ, –Ω–æ –±–µ–∑ –ø—Ä–µ—É–≤–µ–ª–∏—á–µ–Ω–∏–π",
            "–ò–Ω–æ–≥–¥–∞ –ø—Ä–µ—É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–≤–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è",
            "–ß–∞—Å—Ç–æ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–µ—Ç —Å–≤–æ—é –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å",
            "–°—á–∏—Ç–∞–µ—Ç —Å–µ–±—è –ª—É—á—à–µ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ª—é–¥–µ–π"
        ],
        "weights": [0, 1, 2, 3, 4]
    },
    
    "narcissism_q4": {
        "id": "narcissism_q4",
        "block": "narcissism",
        "weight": 3,
        "text": "–ö–∞–∫ –≤–∞—à –ø–∞—Ä—Ç–Ω–µ—Ä —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –≤–∞—à–∏ –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏—è?",
        "context": "–≠–º–ø–∞—Ç–∏—è –∫ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏—è–º",
        "options": [
            "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –≤—ã—Å–ª—É—à–∏–≤–∞–µ—Ç –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç",
            "–°—Ç–∞—Ä–∞–µ—Ç—Å—è –ø–æ–º–æ—á—å, –Ω–æ –Ω–µ –≤—Å–µ–≥–¥–∞ –ø–æ–Ω–∏–º–∞–µ—Ç",
            "–ò–Ω–æ–≥–¥–∞ –æ—Ç–≤–ª–µ–∫–∞–µ—Ç—Å—è, –Ω–æ –≤ —Ü–µ–ª–æ–º —Å–æ—á—É–≤—Å—Ç–≤—É–µ—Ç",
            "–°–ª—É—à–∞–µ—Ç –Ω–µ–≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ, –±—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç —Ç–µ–º—É –Ω–∞ —Å–µ–±—è",
            "–û–±–µ—Å—Ü–µ–Ω–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏—è –∏–ª–∏ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç—Å—è"
        ],
        "weights": [0, 1, 2, 3, 4]
    },
    
    "narcissism_q5": {
        "id": "narcissism_q5",
        "block": "narcissism",
        "weight": 2,
        "text": "–ö–∞–∫ –≤–∞—à –ø–∞—Ä—Ç–Ω–µ—Ä —Å—Ç—Ä–æ–∏—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –ª—é–¥—å–º–∏?",
        "context": "–°–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫ —Ä–∞–≤–Ω–æ–ø—Ä–∞–≤–Ω—ã–º –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º",
        "options": [
            "–õ–µ–≥–∫–æ –Ω–∞—Ö–æ–¥–∏—Ç –æ–±—â–∏–π —è–∑—ã–∫, —É–≤–∞–∂–∞–µ—Ç –≥—Ä–∞–Ω–∏—Ü—ã",
            "–í —Ü–µ–ª–æ–º —Ö–æ—Ä–æ—à–æ, –Ω–æ –∏–Ω–æ–≥–¥–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —ç–≥–æ–∏—Å—Ç–∏—á–Ω—ã–º",
            "–û—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –ª—é–¥—è–º –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è",
            "–î–µ–ª–∏—Ç –ª—é–¥–µ–π –Ω–∞ –ø–æ–ª–µ–∑–Ω—ã—Ö –∏ –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã—Ö",
            "–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ª—é–¥–µ–π –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Å–≤–æ–∏—Ö —Ü–µ–ª–µ–π"
        ],
        "weights": [0, 1, 2, 3, 4]
    },
    
    "narcissism_q6": {
        "id": "narcissism_q6",
        "block": "narcissism",
        "weight": 3,
        "text": "–ö–∞–∫ –≤–∞—à –ø–∞—Ä—Ç–Ω–µ—Ä –∏–∑–≤–∏–Ω—è–µ—Ç—Å—è –∑–∞ —Å–≤–æ–∏ –æ—à–∏–±–∫–∏?",
        "context": "–°–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø—Ä–∏–∑–Ω–∞–≤–∞—Ç—å –≤–∏–Ω—É –∏ –∏–∑–≤–∏–Ω—è—Ç—å—Å—è",
        "options": [
            "–ò—Å–∫—Ä–µ–Ω–Ω–µ –∏–∑–≤–∏–Ω—è–µ—Ç—Å—è –∏ —Å—Ç–∞—Ä–∞–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Å–∏—Ç—É–∞—Ü–∏—é",
            "–ò–∑–≤–∏–Ω—è–µ—Ç—Å—è, –Ω–æ –∏–Ω–æ–≥–¥–∞ —Å –æ–≥–æ–≤–æ—Ä–∫–∞–º–∏",
            "–ò–∑–≤–∏–Ω—è–µ—Ç—Å—è –Ω–µ–æ—Ö–æ—Ç–Ω–æ, –∫–æ–≥–¥–∞ –µ–≥–æ –ø—Ä–∏–Ω—É–∂–¥–∞—é—Ç",
            "–ò–∑–≤–∏–Ω—è–µ—Ç—Å—è —Ñ–æ—Ä–º–∞–ª—å–Ω–æ, –Ω–µ –ø—Ä–∏–∑–Ω–∞–≤–∞—è –≤–∏–Ω—ã",
            "–ù–µ –∏–∑–≤–∏–Ω—è–µ—Ç—Å—è, –Ω–∞—Ö–æ–¥–∏—Ç –æ–ø—Ä–∞–≤–¥–∞–Ω–∏—è –∏–ª–∏ –æ–±–≤–∏–Ω—è–µ—Ç –¥—Ä—É–≥–∏—Ö"
        ],
        "weights": [0, 1, 2, 3, 4]
    }
}

# =================================
# –ë–õ–û–ö 2: –ö–û–ù–¢–†–û–õ–¨ –ò –ú–ê–ù–ò–ü–£–õ–Ø–¶–ò–ò (6 –≤–æ–ø—Ä–æ—Å–æ–≤ - —É–±—Ä–∞–ª control_q6 –∏ control_q8)
# =================================

CONTROL_QUESTIONS = {
    "control_q1": {
        "id": "control_q1",
        "block": "control",
        "weight": 4,
        "text": "–ö–∞–∫ –≤–∞—à –ø–∞—Ä—Ç–Ω–µ—Ä —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –≤–∞—à–∏ –ø–ª–∞–Ω—ã –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å—Å—è —Å –¥—Ä—É–∑—å—è–º–∏?",
        "context": "–ö–æ–Ω—Ç—Ä–æ–ª—å —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤",
        "options": [
            "–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏ —Ä–∞–¥—É–µ—Ç—Å—è –∑–∞ –º–µ–Ω—è",
            "–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ, –∏–Ω–æ–≥–¥–∞ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç—Å—è –ø–ª–∞–Ω–∞–º–∏",
            "–ò–Ω–æ–≥–¥–∞ –≤—ã—Ä–∞–∂–∞–µ—Ç –Ω–µ–¥–æ–≤–æ–ª—å—Å—Ç–≤–æ, –Ω–æ –Ω–µ –∑–∞–ø—Ä–µ—â–∞–µ—Ç",
            "–ß–∞—Å—Ç–æ –Ω–µ–¥–æ–≤–æ–ª–µ–Ω, —É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —Å—Ü–µ–Ω—ã",
            "–ö–∞—Ç–µ–≥–æ—Ä–∏—á–µ—Å–∫–∏ –ø—Ä–æ—Ç–∏–≤, –∑–∞–ø—Ä–µ—â–∞–µ—Ç –≤—Å—Ç—Ä–µ—á–∏"
        ],
        "weights": [0, 1, 2, 3, 4]
    },
    
    "control_q2": {
        "id": "control_q2",
        "block": "control",
        "weight": 3,
        "text": "–ö–∞–∫ –ø–∞—Ä—Ç–Ω–µ—Ä –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –≤–∞—à–∏–º –ª–∏—á–Ω—ã–º –≤–µ—â–∞–º –∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤—É?",
        "context": "–£–≤–∞–∂–µ–Ω–∏–µ –∫ –ª–∏—á–Ω—ã–º –≥—Ä–∞–Ω–∏—Ü–∞–º",
        "options": [
            "–ü–æ–ª–Ω–æ—Å—Ç—å—é —É–≤–∞–∂–∞–µ—Ç –º–æ–∏ –≥—Ä–∞–Ω–∏—Ü—ã",
            "–í –æ—Å–Ω–æ–≤–Ω–æ–º —É–≤–∞–∂–∞–µ—Ç, –∏–Ω–æ–≥–¥–∞ –º–æ–∂–µ—Ç –Ω–∞—Ä—É—à–∏—Ç—å",
            "–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —Ä–æ–µ—Ç—Å—è –≤ –≤–µ—â–∞—Ö –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è",
            "–ß–∞—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ–ª–µ—Ñ–æ–Ω, —Å–æ–æ–±—â–µ–Ω–∏—è",
            "–ü–æ—Å—Ç–æ—è–Ω–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –≤—Å–µ –º–æ–∏ –≤–µ—â–∏ –∏ –¥–µ–π—Å—Ç–≤–∏—è"
        ],
        "weights": [0, 1, 2, 3, 4]
    },
    
    "control_q3": {
        "id": "control_q3",
        "block": "control",
        "weight": 4,
        "text": "–ö–∞–∫ –≤–∞—à –ø–∞—Ä—Ç–Ω–µ—Ä —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –≤–∞—à–∏ —É—Å–ø–µ—Ö–∏ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è?",
        "context": "–û—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞",
        "options": [
            "–ò—Å–∫—Ä–µ–Ω–Ω–µ —Ä–∞–¥—É–µ—Ç—Å—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç",
            "–†–∞–¥—É–µ—Ç—Å—è, –Ω–æ –∏–Ω–æ–≥–¥–∞ –º–æ–∂–µ—Ç –ø—Ä–∏—Ä–µ–≤–Ω–æ–≤–∞—Ç—å",
            "–†–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ, –±–µ–∑ –æ—Å–æ–±–æ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞",
            "–û–±–µ—Å—Ü–µ–Ω–∏–≤–∞–µ—Ç –∏–ª–∏ –Ω–∞—Ö–æ–¥–∏—Ç –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏",
            "–ó–ª–∏—Ç—Å—è, –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–º–µ—à–∞—Ç—å –º–æ–∏–º —É—Å–ø–µ—Ö–∞–º"
        ],
        "weights": [0, 1, 2, 3, 4]
    },
    
    "control_q4": {
        "id": "control_q4",
        "block": "control",
        "weight": 3,
        "text": "–ö–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –≤–∞—à–∏ —Å–æ–≤–º–µ—Å—Ç–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è?",
        "context": "–î–µ–º–æ–∫—Ä–∞—Ç–∏—á–Ω–æ—Å—Ç—å –≤ –ø—Ä–∏–Ω—è—Ç–∏–∏ —Ä–µ—à–µ–Ω–∏–π",
        "options": [
            "–í—Å–µ–≥–¥–∞ –æ–±—Å—É–∂–¥–∞–µ–º –∏ –ø—Ä–∏–Ω–∏–º–∞–µ–º —Ä–µ—à–µ–Ω–∏—è –≤–º–µ—Å—Ç–µ",
            "–û–±—ã—á–Ω–æ —Å–æ–≤–µ—Ç—É–µ–º—Å—è, –Ω–æ –∏–Ω–æ–≥–¥–∞ –æ–¥–∏–Ω —Ä–µ—à–∞–µ—Ç —Å–∞–º",
            "–ß–∞—Å—Ç–æ –æ–¥–∏–Ω –∏–∑ –Ω–∞—Å –Ω–∞–≤—è–∑—ã–≤–∞–µ—Ç —Å–≤–æ–µ –º–Ω–µ–Ω–∏–µ",
            "–ü–∞—Ä—Ç–Ω–µ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ä–µ—à–µ–Ω–∏–π –µ–¥–∏–Ω–æ–ª–∏—á–Ω–æ",
            "–ü–∞—Ä—Ç–Ω–µ—Ä —Ä–µ—à–∞–µ—Ç –≤—Å–µ, –º–æ–µ –º–Ω–µ–Ω–∏–µ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è"
        ],
        "weights": [0, 1, 2, 3, 4]
    },
    
    "control_q5": {
        "id": "control_q5",
        "block": "control",
        "weight": 4,
        "text": "–ö–∞–∫ –≤–∞—à –ø–∞—Ä—Ç–Ω–µ—Ä —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –≤–∞—à–∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è?",
        "context": "–¢–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç—å –∫ –∞–≤—Ç–æ–Ω–æ–º–∏–∏",
        "options": [
            "–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–æ—é —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å",
            "–í –æ—Å–Ω–æ–≤–Ω–æ–º –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç, –∏–Ω–æ–≥–¥–∞ –º–æ–∂–µ—Ç –Ω–µ —Å–æ–≥–ª–∞—Å–∏—Ç—å—Å—è",
            "–ß–∞—Å—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –æ—Ç—á–µ—Ç–∞ –æ –º–æ–∏—Ö —Ä–µ—à–µ–Ω–∏—è—Ö",
            "–ó–ª–∏—Ç—Å—è, –µ—Å–ª–∏ —è —á—Ç–æ-—Ç–æ —Ä–µ—à–∞—é –±–µ–∑ –Ω–µ–≥–æ",
            "–ó–∞–ø—Ä–µ—â–∞–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ"
        ],
        "weights": [0, 1, 2, 3, 4]
    },
    
    "control_q6": {
        "id": "control_q6",
        "block": "control",
        "weight": 3,
        "text": "–ö–∞–∫ –≤–∞—à –ø–∞—Ä—Ç–Ω–µ—Ä –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –≤–∞—à–∏–º —É–≤–ª–µ—á–µ–Ω–∏—è–º –∏ —Ö–æ–±–±–∏?",
        "context": "–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ª–∏—á–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤",
        "options": [
            "–ê–∫—Ç–∏–≤–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç—Å—è",
            "–û—Ç–Ω–æ—Å–∏—Ç—Å—è –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ, –Ω–µ –º–µ—à–∞–µ—Ç",
            "–ò–Ω–æ–≥–¥–∞ –∫—Ä–∏—Ç–∏–∫—É–µ—Ç, –Ω–æ –≤ —Ü–µ–ª–æ–º —Ç–µ—Ä–ø–∏—Ç",
            "–ß–∞—Å—Ç–æ –æ–±–µ—Å—Ü–µ–Ω–∏–≤–∞–µ—Ç, –Ω–∞–∑—ã–≤–∞–µ—Ç –ø—É—Å—Ç–æ–π —Ç—Ä–∞—Ç–æ–π –≤—Ä–µ–º–µ–Ω–∏",
            "–ó–∞–ø—Ä–µ—â–∞–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —Ç–µ–º, —á—Ç–æ –º–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è"
        ],
        "weights": [0, 1, 2, 3, 4]
    }
}

# =================================
# –ë–õ–û–ö 3: –ì–ê–ó–õ–ê–ô–¢–ò–ù–ì –ò –ò–°–ö–ê–ñ–ï–ù–ò–ï –†–ï–ê–õ–¨–ù–û–°–¢–ò (5 –≤–æ–ø—Ä–æ—Å–æ–≤ - —É–±—Ä–∞–ª gaslighting_q5)
# =================================

GASLIGHTING_QUESTIONS = {
    "gaslighting_q1": {
        "id": "gaslighting_q1",
        "block": "gaslighting",
        "weight": 4,
        "text": "–ö–∞–∫ –≤–∞—à –ø–∞—Ä—Ç–Ω–µ—Ä —Ä–µ–∞–≥–∏—Ä—É–µ—Ç, –∫–æ–≥–¥–∞ –≤—ã –≤—ã—Ä–∞–∂–∞–µ—Ç–µ —Å–≤–æ–∏ —á—É–≤—Å—Ç–≤–∞?",
        "context": "–í–∞–ª–∏–¥–∞—Ü–∏—è —ç–º–æ—Ü–∏–π",
        "options": [
            "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –≤—ã—Å–ª—É—à–∏–≤–∞–µ—Ç –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç",
            "–°—Ç–∞—Ä–∞–µ—Ç—Å—è –ø–æ–Ω—è—Ç—å, –∏–Ω–æ–≥–¥–∞ –º–æ–∂–µ—Ç –Ω–µ —Å–æ–≥–ª–∞—Å–∏—Ç—å—Å—è",
            "–ò–Ω–æ–≥–¥–∞ –æ–±–µ—Å—Ü–µ–Ω–∏–≤–∞–µ—Ç, –Ω–æ –≤ —Ü–µ–ª–æ–º —Å–ª—É—à–∞–µ—Ç",
            "–ß–∞—Å—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ —è —Å–ª–∏—à–∫–æ–º —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞",
            "–ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç—Ä–∏—Ü–∞–µ—Ç –º–æ–∏ —á—É–≤—Å—Ç–≤–∞ –∏ –Ω–∞–∑—ã–≤–∞–µ—Ç –∏—Ö –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏"
        ],
        "weights": [0, 1, 2, 3, 4]
    },
    
    "gaslighting_q2": {
        "id": "gaslighting_q2",
        "block": "gaslighting",
        "weight": 4,
        "text": "–ö–∞–∫ –≤–∞—à –ø–∞—Ä—Ç–Ω–µ—Ä –≤–µ–¥–µ—Ç —Å–µ–±—è –ø–æ—Å–ª–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤?",
        "context": "–û—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—é –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤",
        "options": [
            "–û–±—Å—É–∂–¥–∞–µ—Ç –ø—Ä–æ–∏–∑–æ—à–µ–¥—à–µ–µ –∏ –∏—â–µ—Ç —Ä–µ—à–µ–Ω–∏–µ",
            "–û–±—ã—á–Ω–æ –º–∏—Ä–∏—Ç—Å—è, –Ω–æ –Ω–µ –≤—Å–µ–≥–¥–∞ –æ–±—Å—É–∂–¥–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É",
            "–î–µ–ª–∞–µ—Ç –≤–∏–¥, —á—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ",
            "–û–±–≤–∏–Ω—è–µ—Ç –º–µ–Ω—è –≤ —Ç–æ–º, —á—Ç–æ —è –≤—Å–µ –ø—Ä–∏–¥—É–º–∞–ª–∞",
            "–£—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç, —á—Ç–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –Ω–µ –±—ã–ª–æ, —è –≤—Å–µ –≤—ã–¥—É–º–∞–ª–∞"
        ],
        "weights": [0, 1, 2, 3, 4]
    },
    
    "gaslighting_q3": {
        "id": "gaslighting_q3",
        "block": "gaslighting",
        "weight": 3,
        "text": "–ö–∞–∫ –≤–∞—à –ø–∞—Ä—Ç–Ω–µ—Ä –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –≤–∞—à–µ–π –ø–∞–º—è—Ç–∏ –æ —Å–æ–±—ã—Ç–∏—è—Ö?",
        "context": "–ü–æ–¥—Ä—ã–≤ –¥–æ–≤–µ—Ä–∏—è –∫ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏",
        "options": [
            "–î–æ–≤–µ—Ä—è–µ—Ç –º–æ–µ–π –ø–∞–º—è—Ç–∏ –∏ –≤–µ—Ä—Å–∏–∏ —Å–æ–±—ã—Ç–∏–π",
            "–ò–Ω–æ–≥–¥–∞ –º–æ–∂–µ—Ç –Ω–µ —Å–æ–≥–ª–∞—Å–∏—Ç—å—Å—è, –Ω–æ —É–≤–∞–∂–∞–µ—Ç –º–æ—é —Ç–æ—á–∫—É –∑—Ä–µ–Ω–∏—è",
            "–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —Å–æ–º–Ω–µ–≤–∞–µ—Ç—Å—è –≤ –º–æ–µ–π –ø–∞–º—è—Ç–∏",
            "–ß–∞—Å—Ç–æ —É—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç, —á—Ç–æ —è –≤—Å–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–º–Ω—é",
            "–ü–æ—Å—Ç–æ—è–Ω–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ —É –º–µ–Ω—è –ø–ª–æ—Ö–∞—è –ø–∞–º—è—Ç—å –∏ —è –≤—Å–µ –ø—É—Ç–∞—é"
        ],
        "weights": [0, 1, 2, 3, 4]
    },
    
    "gaslighting_q4": {
        "id": "gaslighting_q4",
        "block": "gaslighting",
        "weight": 4,
        "text": "–ö–∞–∫ –≤–∞—à –ø–∞—Ä—Ç–Ω–µ—Ä —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –≤–∞—à–∏ —Å–æ–º–Ω–µ–Ω–∏—è –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö?",
        "context": "–†–µ–∞–∫—Ü–∏—è –Ω–∞ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–º–Ω–µ–Ω–∏–π",
        "options": [
            "–û—Ç–∫—Ä—ã—Ç–æ –æ–±—Å—É–∂–¥–∞–µ—Ç –∏ —Å—Ç–∞—Ä–∞–µ—Ç—Å—è —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è",
            "–í—ã—Å–ª—É—à–∏–≤–∞–µ—Ç, –Ω–æ –º–æ–∂–µ—Ç –∑–∞—â–∏—â–∞—Ç—å—Å—è",
            "–ò–Ω–æ–≥–¥–∞ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç—Å—è, –Ω–æ –≤ —Ü–µ–ª–æ–º —Å–ª—É—à–∞–µ—Ç",
            "–û–±–≤–∏–Ω—è–µ—Ç –º–µ–Ω—è –≤ –ø–∞—Ä–∞–Ω–æ–π–µ –∏ –Ω–µ–¥–æ–≤–µ—Ä–∏–∏",
            "–ì–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ —è —Å—É–º–∞—Å—à–µ–¥—à–∞—è –∏ –≤—Å–µ –≤—ã–¥—É–º—ã–≤–∞—é"
        ],
        "weights": [0, 1, 2, 3, 4]
    },
    
    "gaslighting_q5": {
        "id": "gaslighting_q5",
        "block": "gaslighting",
        "weight": 3,
        "text": "–ö–∞–∫ –≤–∞—à –ø–∞—Ä—Ç–Ω–µ—Ä –æ–±—ä—è—Å–Ω—è–µ—Ç —Å–≤–æ–∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è?",
        "context": "–°–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø—Ä–∏–∑–Ω–∞–≤–∞—Ç—å –Ω–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å",
        "options": [
            "–ß–µ—Å—Ç–Ω–æ –æ–±—ä—è—Å–Ω—è–µ—Ç –∏ –ø—Ä–∏–∑–Ω–∞–µ—Ç –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è",
            "–û–±—ã—á–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç –ª–æ–≥–∏—á–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ",
            "–ò–Ω–æ–≥–¥–∞ —É—Ö–æ–¥–∏—Ç –æ—Ç –æ—Ç–≤–µ—Ç–∞ –∏–ª–∏ –º–µ–Ω—è–µ—Ç —Ç–µ–º—É",
            "–û—Ç—Ä–∏—Ü–∞–µ—Ç –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è –∏ –æ–±–≤–∏–Ω—è–µ—Ç –º–µ–Ω—è –≤ –ø—Ä–∏–¥–∏—Ä–∫–∞—Ö",
            "–£—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç, —á—Ç–æ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π –Ω–µ—Ç, —è –≤—Å–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–Ω–∏–º–∞—é"
        ],
        "weights": [0, 1, 2, 3, 4]
    }
}

# =================================
# –ë–õ–û–ö 4: –≠–ú–û–¶–ò–û–ù–ê–õ–¨–ù–ê–Ø –†–ï–ì–£–õ–Ø–¶–ò–Ø (4 –≤–æ–ø—Ä–æ—Å–∞ - —É–±—Ä–∞–ª emotion_q3) 
# =================================

EMOTION_QUESTIONS = {
    "emotion_q1": {
        "id": "emotion_q1",
        "block": "emotion",
        "weight": 4,
        "text": "–ö–∞–∫ –≤–∞—à –ø–∞—Ä—Ç–Ω–µ—Ä –≤—ã—Ä–∞–∂–∞–µ—Ç –≥–Ω–µ–≤?",
        "context": "–°–ø–æ—Å–æ–±—ã –≤—ã—Ä–∞–∂–µ–Ω–∏—è –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö —ç–º–æ—Ü–∏–π",
        "options": [
            "–°–ø–æ–∫–æ–π–Ω–æ –æ–±—Å—É–∂–¥–∞–µ—Ç —Ç–æ, —á—Ç–æ –µ–≥–æ —Ä–∞—Å—Å—Ç—Ä–æ–∏–ª–æ",
            "–ò–Ω–æ–≥–¥–∞ –ø–æ–≤—ã—à–∞–µ—Ç –≥–æ–ª–æ—Å, –Ω–æ –±—ã—Å—Ç—Ä–æ —É—Å–ø–æ–∫–∞–∏–≤–∞–µ—Ç—Å—è",
            "–ß–∞—Å—Ç–æ –∫—Ä–∏—á–∏—Ç, –Ω–æ –Ω–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ –ª–∏—á–Ω–æ—Å—Ç–∏",
            "–û—Å–∫–æ—Ä–±–ª—è–µ—Ç, —É–Ω–∏–∂–∞–µ—Ç, –º–æ–∂–µ—Ç –±—Ä–æ—Å–∞—Ç—å –≤–µ—â–∏",
            "–ü—Ä–∏–º–µ–Ω—è–µ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫—É—é —Å–∏–ª—É –∏–ª–∏ —É–≥—Ä–æ–∂–∞–µ—Ç"
        ],
        "weights": [0, 1, 2, 3, 4]
    },
    
    "emotion_q2": {
        "id": "emotion_q2",
        "block": "emotion",
        "weight": 3,
        "text": "–ö–∞–∫ —á–∞—Å—Ç–æ —É –≤–∞—à–µ–≥–æ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ?",
        "context": "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å",
        "options": [
            "–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ, –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã",
            "–ò–Ω–æ–≥–¥–∞ –±—ã–≤–∞—é—Ç –ø–µ—Ä–µ–ø–∞–¥—ã, –Ω–æ –≤ —Ü–µ–ª–æ–º —Å—Ç–∞–±–∏–ª—å–Ω–æ",
            "–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–µ–Ω—è–µ—Ç—Å—è –¥–æ–≤–æ–ª—å–Ω–æ —á–∞—Å—Ç–æ",
            "–†–µ–∑–∫–∏–µ –ø–µ—Ä–µ–ø–∞–¥—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é",
            "–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–µ–Ω—è–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤ –¥–µ–Ω—å –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ"
        ],
        "weights": [0, 1, 2, 3, 4]
    },
    
    "emotion_q3": {
        "id": "emotion_q3",
        "block": "emotion",
        "weight": 4,
        "text": "–ö–∞–∫ –≤–∞—à –ø–∞—Ä—Ç–Ω–µ—Ä —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –≤–∞—à–∏ —Å–ª–µ–∑—ã –∏–ª–∏ —Ä–∞—Å—Å—Ç—Ä–æ–π—Å—Ç–≤–æ?",
        "context": "–≠–º–ø–∞—Ç–∏—è –∫ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é",
        "options": [
            "–£—Ç–µ—à–∞–µ—Ç –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç",
            "–°—Ç–∞—Ä–∞–µ—Ç—Å—è –ø–æ–º–æ—á—å, –Ω–æ –∏–Ω–æ–≥–¥–∞ –Ω–µ –∑–Ω–∞–µ—Ç –∫–∞–∫",
            "–ò–Ω–æ–≥–¥–∞ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç, –∏–Ω–æ–≥–¥–∞ —É—Ç–µ—à–∞–µ—Ç",
            "–†–∞–∑–¥—Ä–∞–∂–∞–µ—Ç—Å—è –∏ –≥–æ–≤–æ—Ä–∏—Ç –ø–µ—Ä–µ—Å—Ç–∞—Ç—å –ø–ª–∞–∫–∞—Ç—å",
            "–ó–ª–∏—Ç—Å—è, –æ—Å–∫–æ—Ä–±–ª—è–µ—Ç –∏–ª–∏ –æ–±–≤–∏–Ω—è–µ—Ç –≤ —Å–ª–∞–±–æ—Å—Ç–∏"
        ],
        "weights": [0, 1, 2, 3, 4]
    },
    
    "emotion_q4": {
        "id": "emotion_q4",
        "block": "emotion",
        "weight": 3,
        "text": "–ö–∞–∫ –≤–∞—à –ø–∞—Ä—Ç–Ω–µ—Ä –≤–µ–¥–µ—Ç —Å–µ–±—è –≤ —Å—Ç—Ä–µ—Å—Å–æ–≤—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö?",
        "context": "–ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–¥ –¥–∞–≤–ª–µ–Ω–∏–µ–º",
        "options": [
            "–û—Å—Ç–∞–µ—Ç—Å—è —Å–ø–æ–∫–æ–π–Ω—ã–º –∏ —Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º",
            "–ò–Ω–æ–≥–¥–∞ –Ω–µ—Ä–≤–Ω–∏—á–∞–µ—Ç, –Ω–æ –≤ —Ü–µ–ª–æ–º —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è",
            "–ß–∞—Å—Ç–æ —Ç–µ—Ä—è–µ—Ç —Å–∞–º–æ–æ–±–ª–∞–¥–∞–Ω–∏–µ, –Ω–æ –Ω–µ —Å—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –¥—Ä—É–≥–∏—Ö",
            "–°—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–º, –≤–∏–Ω–∏—Ç –æ–∫—Ä—É–∂–∞—é—â–∏—Ö",
            "–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ç–µ—Ä—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—å, –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –æ–ø–∞—Å–Ω—ã–º"
        ],
        "weights": [0, 1, 2, 3, 4]
    }
}

# =================================
# –ë–õ–û–ö 5: –ò–ù–¢–ò–ú–ù–û–°–¢–¨ –ò –ü–†–ò–ù–£–ñ–î–ï–ù–ò–ï (3 –≤–æ–ø—Ä–æ—Å–∞ - —É–±—Ä–∞–ª intimacy_q3)
# =================================

INTIMACY_QUESTIONS = {
    "intimacy_q1": {
        "id": "intimacy_q1",
        "block": "intimacy",
        "weight": 4,
        "text": "–ö–∞–∫ –≤–∞—à –ø–∞—Ä—Ç–Ω–µ—Ä –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –≤–∞—à–∏–º –≥—Ä–∞–Ω–∏—Ü–∞–º –≤ –∏–Ω—Ç–∏–º–Ω–æ—Å—Ç–∏?",
        "context": "–£–≤–∞–∂–µ–Ω–∏–µ –∫ —Å–æ–≥–ª–∞—Å–∏—é –∏ –≥—Ä–∞–Ω–∏—Ü–∞–º",
        "options": [
            "–í—Å–µ–≥–¥–∞ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å–æ–≥–ª–∞—Å–∏–µ –∏ —É–≤–∞–∂–∞–µ—Ç –≥—Ä–∞–Ω–∏—Ü—ã",
            "–û–±—ã—á–Ω–æ —É–≤–∞–∂–∞–µ—Ç, –∏–Ω–æ–≥–¥–∞ –º–æ–∂–µ—Ç –Ω–∞—Å—Ç–∞–∏–≤–∞—Ç—å",
            "–ò–Ω–æ–≥–¥–∞ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –Ω–µ–∂–µ–ª–∞–Ω–∏–µ, –Ω–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è",
            "–ß–∞—Å—Ç–æ –ø—Ä–∏–Ω—É–∂–¥–∞–µ—Ç –∏ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ—Ç–∫–∞–∑",
            "–ü–æ–ª–Ω–æ—Å—Ç—å—é –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç —Å–æ–≥–ª–∞—Å–∏–µ –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –ø—Ä–∏–Ω—É–∂–¥–µ–Ω–∏–µ"
        ],
        "weights": [0, 1, 2, 3, 4]
    },
    
    "intimacy_q2": {
        "id": "intimacy_q2",
        "block": "intimacy",
        "weight": 3,
        "text": "–ö–∞–∫ –≤–∞—à –ø–∞—Ä—Ç–Ω–µ—Ä —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –≤–∞—à–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –≤ –±–ª–∏–∑–æ—Å—Ç–∏?",
        "context": "–í–Ω–∏–º–∞–Ω–∏–µ –∫ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—è–º –ø–∞—Ä—Ç–Ω–µ—Ä–∞",
        "options": [
            "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –≤—ã—Å–ª—É—à–∏–≤–∞–µ—Ç –∏ —É—á–∏—Ç—ã–≤–∞–µ—Ç –º–æ–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏",
            "–°—Ç–∞—Ä–∞–µ—Ç—Å—è –ø–æ–Ω—è—Ç—å, –Ω–æ –Ω–µ –≤—Å–µ–≥–¥–∞ –ø–æ–ª—É—á–∞–µ—Ç—Å—è",
            "–ò–Ω–æ–≥–¥–∞ —É—á–∏—Ç—ã–≤–∞–µ—Ç, –∏–Ω–æ–≥–¥–∞ —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ–±–µ",
            "–†–µ–¥–∫–æ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç—Å—è –º–æ–∏–º–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—è–º–∏",
            "–ü–æ–ª–Ω–æ—Å—Ç—å—é –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –º–æ–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –∏ –∂–µ–ª–∞–Ω–∏—è"
        ],
        "weights": [0, 1, 2, 3, 4]
    },
    
    "intimacy_q3": {
        "id": "intimacy_q3",
        "block": "intimacy",
        "weight": 4,
        "text": "–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–∏ –≤–∞—à –ø–∞—Ä—Ç–Ω–µ—Ä –∏–Ω—Ç–∏–º–Ω–æ—Å—Ç—å –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è?",
        "context": "–ú–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–∏–º–Ω–æ—Å—Ç—å",
        "options": [
            "–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω—Ç–∏–º–Ω–æ—Å—Ç—å –¥–ª—è –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π",
            "–û—á–µ–Ω—å —Ä–µ–¥–∫–æ –º–æ–∂–µ—Ç –Ω–∞–º–µ–∫–∞—Ç—å –Ω–∞ —Å–≤—è–∑—å –º–µ–∂–¥—É –±–ª–∏–∑–æ—Å—Ç—å—é –∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏",
            "–ò–Ω–æ–≥–¥–∞ –æ–±–∏–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ –≤ –±–ª–∏–∑–æ—Å—Ç–∏",
            "–ß–∞—Å—Ç–æ —É–≥—Ä–æ–∂–∞–µ—Ç —Ä–∞–∑—Ä—ã–≤–æ–º –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ –≤ –±–ª–∏–∑–æ—Å—Ç–∏",
            "–ü–æ—Å—Ç–æ—è–Ω–Ω–æ —à–∞–Ω—Ç–∞–∂–∏—Ä—É–µ—Ç –∏ –ø—Ä–∏–Ω—É–∂–¥–∞–µ—Ç —á–µ—Ä–µ–∑ —É–≥—Ä–æ–∑—ã"
        ],
        "weights": [0, 1, 2, 3, 4]
    }
}

# =================================
# –ë–õ–û–ö 6: –°–û–¶–ò–ê–õ–¨–ù–û–ï –ü–û–í–ï–î–ï–ù–ò–ï (4 –≤–æ–ø—Ä–æ—Å–∞ - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
# =================================

SOCIAL_QUESTIONS = {
    "social_q1": {
        "id": "social_q1",
        "block": "social",
        "weight": 3,
        "text": "–ö–∞–∫ –≤–∞—à –ø–∞—Ä—Ç–Ω–µ—Ä –≤–µ–¥–µ—Ç —Å–µ–±—è –≤ –∫–æ–º–ø–∞–Ω–∏–∏ –¥—Ä—É–≥–∏—Ö –ª—é–¥–µ–π?",
        "context": "–°–æ—Ü–∏–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∏ –º–∞—Å–∫–∏",
        "options": [
            "–í–µ–¥–µ—Ç —Å–µ–±—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ, —Ç–∞–∫ –∂–µ –∫–∞–∫ –Ω–∞–µ–¥–∏–Ω–µ",
            "–ò–Ω–æ–≥–¥–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª–µ–µ —Å–¥–µ—Ä–∂–∞–Ω–Ω—ã–º –∏–ª–∏ –∞–∫—Ç–∏–≤–Ω—ã–º",
            "–ó–∞–º–µ—Ç–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è –≤ –∫–æ–º–ø–∞–Ω–∏–∏, –Ω–æ –Ω–µ –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ",
            "–ö–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è, —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥—Ä—É–≥–∏–º —á–µ–ª–æ–≤–µ–∫–æ–º",
            "–ü–æ–ª–Ω–æ—Å—Ç—å—é –¥—Ä—É–≥–∞—è –ª–∏—á–Ω–æ—Å—Ç—å, –Ω–µ—É–∑–Ω–∞–≤–∞–µ–º—ã–π"
        ],
        "weights": [0, 1, 2, 3, 4]
    },
    
    "social_q2": {
        "id": "social_q2",
        "block": "social",
        "weight": 4,
        "text": "–ö–∞–∫ –≤–∞—à –ø–∞—Ä—Ç–Ω–µ—Ä –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –≤–∞—à–∏–º –¥—Ä—É–∑—å—è–º –∏ —Å–µ–º—å–µ?",
        "context": "–ò–∑–æ–ª—è—Ü–∏—è –æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–µ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è",
        "options": [
            "–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∞—à–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å –±–ª–∏–∑–∫–∏–º–∏",
            "–í —Ü–µ–ª–æ–º –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –Ω–æ –Ω–µ –≤—Å–µ –¥—Ä—É–∑—å—è –µ–º—É –Ω—Ä–∞–≤—è—Ç—Å—è",
            "–ò–Ω–æ–≥–¥–∞ –∫—Ä–∏—Ç–∏–∫—É–µ—Ç –±–ª–∏–∑–∫–∏—Ö, –Ω–æ –Ω–µ –∑–∞–ø—Ä–µ—â–∞–µ—Ç –æ–±—â–µ–Ω–∏–µ",
            "–ß–∞—Å—Ç–æ –∫—Ä–∏—Ç–∏–∫—É–µ—Ç –≤–∞—à–∏—Ö –¥—Ä—É–∑–µ–π –∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –æ–±—â–µ–Ω–∏–µ",
            "–ó–∞–ø—Ä–µ—â–∞–µ—Ç –≤–∏–¥–µ—Ç—å—Å—è —Å –¥—Ä—É–∑—å—è–º–∏ –∏ —Å–µ–º—å–µ–π"
        ],
        "weights": [0, 1, 2, 3, 4]
    },
    
    "social_q3": {
        "id": "social_q3",
        "block": "social",
        "weight": 3,
        "text": "–ö–∞–∫ –æ–∫—Ä—É–∂–∞—é—â–∏–µ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –≤–∞—à–µ–º—É –ø–∞—Ä—Ç–Ω–µ—Ä—É?",
        "context": "–í–æ—Å–ø—Ä–∏—è—Ç–∏–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –¥—Ä—É–≥–∏–º–∏ –ª—é–¥—å–º–∏",
        "options": [
            "–í—Å–µ –¥—Ä—É–∑—å—è –∏ —Å–µ–º—å—è –µ–≥–æ –ª—é–±—è—Ç –∏ —É–≤–∞–∂–∞—é—Ç",
            "–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è —Ö–æ—Ä–æ—à–æ, –µ—Å—Ç—å –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ",
            "–û—Ç–Ω–æ—à–µ–Ω–∏–µ —Å–º–µ—à–∞–Ω–Ω–æ–µ, –µ—Å—Ç—å –∫–∞–∫ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ, —Ç–∞–∫ –∏ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –º–Ω–µ–Ω–∏—è",
            "–ú–Ω–æ–≥–∏–µ –≤—ã—Å–∫–∞–∑—ã–≤–∞—é—Ç —Å–æ–º–Ω–µ–Ω–∏—è –∏–ª–∏ –Ω–µ –æ–¥–æ–±—Ä—è—é—Ç",
            "–ü–æ—á—Ç–∏ –≤—Å–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—é—Ç –º–µ–Ω—è –æ –Ω–µ–º"
        ],
        "weights": [0, 1, 2, 3, 4]
    },
    
    "social_q4": {
        "id": "social_q4",
        "block": "social",
        "weight": 4,
        "text": "–ö–∞–∫ –≤–∞—à –ø–∞—Ä—Ç–Ω–µ—Ä —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∫—Ä–∏—Ç–∏–∫—É –æ—Ç –¥—Ä—É–≥–∏—Ö?",
        "context": "–†–µ–∞–∫—Ü–∏—è –Ω–∞ –≤–Ω–µ—à–Ω—é—é –∫—Ä–∏—Ç–∏–∫—É",
        "options": [
            "–í—ã—Å–ª—É—à–∏–≤–∞–µ—Ç –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫—Ä–∏—Ç–∏–∫—É",
            "–ò–Ω–æ–≥–¥–∞ –∑–∞—â–∏—â–∞–µ—Ç—Å—è, –Ω–æ –≤ —Ü–µ–ª–æ–º –ø—Ä–∏–Ω–∏–º–∞–µ—Ç",
            "–ß–∞—Å—Ç–æ –æ–±–∏–∂–∞–µ—Ç—Å—è, –Ω–æ –Ω–µ –º—Å—Ç–∏—Ç",
            "–ó–ª–∏—Ç—Å—è –∏ –ø—ã—Ç–∞–µ—Ç—Å—è –æ—Ç–æ–º—Å—Ç–∏—Ç—å –∫—Ä–∏—Ç–∏–∫–∞–º",
            "–í–ø–∞–¥–∞–µ—Ç –≤ —è—Ä–æ—Å—Ç—å, –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –æ–ø–∞—Å–Ω—ã–º"
        ],
        "weights": [0, 1, 2, 3, 4]
    }
}

# =================================
# –û–°–ù–û–í–ù–´–ï –§–£–ù–ö–¶–ò–ò
# =================================

def get_all_questions() -> Dict[str, Dict[str, Any]]:
    """–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã –ø—Ä–æ—Ñ–∞–π–ª–µ—Ä–∞"""
    all_questions = {}
    all_questions.update(NARCISSISM_QUESTIONS)
    all_questions.update(CONTROL_QUESTIONS)
    all_questions.update(GASLIGHTING_QUESTIONS)
    all_questions.update(EMOTION_QUESTIONS)
    all_questions.update(INTIMACY_QUESTIONS)
    all_questions.update(SOCIAL_QUESTIONS)
    return all_questions

def get_question_by_state(state_name: str) -> Dict[str, Any]:
    """–ü–æ–ª—É—á–∏—Ç—å –≤–æ–ø—Ä–æ—Å –ø–æ –∏–º–µ–Ω–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è"""
    questions = get_all_questions()
    return questions.get(state_name)

def get_block_questions(block_name: str) -> Dict[str, Dict[str, Any]]:
    """–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã –±–ª–æ–∫–∞"""
    all_questions = get_all_questions()
    return {k: v for k, v in all_questions.items() if v['block'] == block_name}

def calculate_total_questions() -> int:
    """–ü–æ–¥—Å—á–∏—Ç–∞—Ç—å –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤"""
    return len(get_all_questions())

# =================================
# –ù–ê–í–ò–ì–ê–¶–ò–Ø –ü–û –í–û–ü–†–û–°–ê–ú (–û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –î–õ–Ø 28 –í–û–ü–†–û–°–û–í)
# =================================

QUESTION_ORDER = [
    # Block 1: Narcissism (6 questions)
    "narcissism_q1", "narcissism_q2", "narcissism_q3", "narcissism_q4",
    "narcissism_q5", "narcissism_q6",
    
    # Block 2: Control (6 questions)  
    "control_q1", "control_q2", "control_q3", "control_q4",
    "control_q5", "control_q6",
    
    # Block 3: Gaslighting (5 questions)
    "gaslighting_q1", "gaslighting_q2", "gaslighting_q3", 
    "gaslighting_q4", "gaslighting_q5",
    
    # Block 4: Emotion (4 questions)
    "emotion_q1", "emotion_q2", "emotion_q3", "emotion_q4",
    
    # Block 5: Intimacy (3 questions)
    "intimacy_q1", "intimacy_q2", "intimacy_q3",
    
    # Block 6: Social (4 questions)
    "social_q1", "social_q2", "social_q3", "social_q4"
]

def get_next_question_state(current_state: str) -> str:
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞"""
    try:
        current_index = QUESTION_ORDER.index(current_state)
        if current_index < len(QUESTION_ORDER) - 1:
            return QUESTION_ORDER[current_index + 1]
        else:
            return "reviewing_answers"
    except ValueError:
        return "reviewing_answers"

def get_previous_question_state(current_state: str) -> str:
    """–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞"""
    try:
        current_index = QUESTION_ORDER.index(current_state)
        if current_index > 0:
            return QUESTION_ORDER[current_index - 1]
        else:
            return "waiting_for_description"
    except ValueError:
        return "waiting_for_description"

def get_question_progress(current_state: str) -> Tuple[int, int]:
    """–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è (—Ç–µ–∫—É—â–∏–π –≤–æ–ø—Ä–æ—Å, –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ)"""
    try:
        current_index = QUESTION_ORDER.index(current_state)
        return (current_index + 1, len(QUESTION_ORDER))
    except ValueError:
        return (1, len(QUESTION_ORDER))

def get_block_by_question(question_state: str) -> str:
    """–ü–æ–ª—É—á–∏—Ç—å –±–ª–æ–∫ –ø–æ —Å–æ—Å—Ç–æ—è–Ω–∏—é –≤–æ–ø—Ä–æ—Å–∞"""
    question = get_question_by_state(question_state)
    return question.get('block', 'unknown') if question else 'unknown'

def format_question_text(question_data: Dict[str, Any], question_num: int, total_questions: int) -> str:
    """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è"""
    if not question_data:
        return "–û—à–∏–±–∫–∞: –≤–æ–ø—Ä–æ—Å –Ω–µ –Ω–∞–π–¥–µ–Ω"
    
    # –ë–ª–æ–∫ —ç–º–æ–¥–∑–∏
    block_emoji = {
        "narcissism": "üß†",
        "control": "üéØ", 
        "gaslighting": "üîÑ",
        "emotion": "üí≠",
        "intimacy": "üíï",
        "social": "üë•"
    }
    
    block_names = {
        "narcissism": "–ù–∞—Ä—Ü–∏—Å—Å–∏–∑–º –∏ –≥—Ä–∞–Ω–¥–∏–æ–∑–Ω–æ—Å—Ç—å",
        "control": "–ö–æ–Ω—Ç—Ä–æ–ª—å –∏ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏",
        "gaslighting": "–ì–∞–∑–ª–∞–π—Ç–∏–Ω–≥ –∏ –∏—Å–∫–∞–∂–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏", 
        "emotion": "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ä–µ–≥—É–ª—è—Ü–∏—è",
        "intimacy": "–ò–Ω—Ç–∏–º–Ω–æ—Å—Ç—å –∏ –ø—Ä–∏–Ω—É–∂–¥–µ–Ω–∏–µ",
        "social": "–°–æ—Ü–∏–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ"
    }
    
    block = question_data.get('block', 'unknown')
    emoji = block_emoji.get(block, '‚ùì')
    block_name = block_names.get(block, '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –±–ª–æ–∫')
    
    # –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
    progress_percentage = (question_num / total_questions) * 100
    progress_bar_length = 10
    filled_length = int(progress_bar_length * question_num // total_questions)
    progress_bar = "‚ñà" * filled_length + "‚ñë" * (progress_bar_length - filled_length)
    
    question_text = f"""üìã **–í–æ–ø—Ä–æ—Å {question_num} –∏–∑ {total_questions}**

{emoji} **–ë–ª–æ–∫:** {block_name}

üìä **–ü—Ä–æ–≥—Ä–µ—Å—Å:** {progress_bar} {progress_percentage:.0f}%

‚ùì **{question_data['text']}**

üí≠ _{question_data['context']}_

–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –≤–∞—Ä–∏–∞–Ω—Ç:"""
    
    return question_text

# =================================
# –°–ò–°–¢–ï–ú–ê –ü–û–î–°–ß–ï–¢–ê –ë–ê–õ–õ–û–í
# =================================

def calculate_weighted_scores(answers: Dict[str, int]) -> Dict[str, Any]:
    """–ü–æ–¥—Å—á–∏—Ç–∞—Ç—å –≤–∑–≤–µ—à–µ–Ω–Ω—ã–µ –±–∞–ª–ª—ã —Å —É—á–µ—Ç–æ–º –≤–µ—Å–æ–≤ –≤–æ–ø—Ä–æ—Å–æ–≤"""
    all_questions = get_all_questions()
    
    # –ü–æ–¥—Å—á–µ—Ç –ø–æ –±–ª–æ–∫–∞–º
    block_scores = {
        "narcissism": 0,
        "control": 0, 
        "gaslighting": 0,
        "emotion": 0,
        "intimacy": 0,
        "social": 0
    }
    
    block_max_scores = {
        "narcissism": 0,
        "control": 0,
        "gaslighting": 0, 
        "emotion": 0,
        "intimacy": 0,
        "social": 0
    }
    
    # –ü–æ–¥—Å—á–µ—Ç –±–∞–ª–ª–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
    for question_id, answer_index in answers.items():
        question = all_questions.get(question_id)
        if not question:
            continue
            
        block = question['block']
        weight = question['weight']
        answer_weight = question['weights'][answer_index] if answer_index < len(question['weights']) else 0
        
        # –ë–∞–ª–ª—ã = –≤–µ—Å –≤–æ–ø—Ä–æ—Å–∞ * –≤–µ—Å –æ—Ç–≤–µ—Ç–∞
        score = weight * answer_weight
        block_scores[block] += score
        
        # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑–º–æ–∂–Ω—ã–π –±–∞–ª–ª –¥–ª—è —ç—Ç–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
        max_score = weight * max(question['weights'])
        block_max_scores[block] += max_score
    
    # –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–ª–ª–æ–≤ –¥–æ 0-10 –ø–æ –∫–∞–∂–¥–æ–º—É –±–ª–æ–∫—É
    normalized_block_scores = {}
    for block in block_scores:
        if block_max_scores[block] > 0:
            normalized_score = (block_scores[block] / block_max_scores[block]) * 10
            normalized_block_scores[block] = round(normalized_score, 1)
        else:
            normalized_block_scores[block] = 0.0
    
    # –û–±—â–∏–π –≤–∑–≤–µ—à–µ–Ω–Ω—ã–π –±–∞–ª–ª —Ä–∏—Å–∫–∞
    total_score = sum(block_scores.values())
    total_max_score = sum(block_max_scores.values())
    overall_risk_score = (total_score / total_max_score * 100) if total_max_score > 0 else 0
    
    return {
        "block_scores": normalized_block_scores,
        "overall_risk_score": round(overall_risk_score, 1),
        "urgency_level": get_urgency_level(overall_risk_score),
        "raw_scores": block_scores,
        "max_scores": block_max_scores
    }

def get_urgency_level(risk_score: float) -> UrgencyLevel:
    """–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å —Å—Ä–æ—á–Ω–æ—Å—Ç–∏ –ø–æ –±–∞–ª–ª—É —Ä–∏—Å–∫–∞"""
    if risk_score >= 75:
        return UrgencyLevel.CRITICAL
    elif risk_score >= 50:
        return UrgencyLevel.HIGH
    elif risk_score >= 25:
        return UrgencyLevel.MEDIUM
    else:
        return UrgencyLevel.LOW

def get_safety_alerts(answers: Dict[str, int]) -> List[str]:
    """–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤"""
    alerts = []
    all_questions = get_all_questions()
    
    # –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è
    critical_patterns = {
        "control_q1": [3],  # –ö–æ–Ω—Ç—Ä–æ–ª—å –≤—Ä–µ–º–µ–Ω–∏ - –ø–æ—Å–ª–µ–¥–Ω–∏–π –æ—Ç–≤–µ—Ç
        "control_q2": [3],  # –ò–∑–æ–ª—è—Ü–∏—è –æ—Ç –¥—Ä—É–∑–µ–π/—Å–µ–º—å–∏
        "control_q4": [3],  # –ü–æ–ª–Ω—ã–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å
        "control_q5": [3],  # –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ –≥—Ä–∞–Ω–∏—Ü
        "control_q7": [3],  # –£–≥—Ä–æ–∑—ã –∏ –∑–∞–ø—É–≥–∏–≤–∞–Ω–∏–µ
        "gaslighting_q1": [3],  # –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏
        "gaslighting_q2": [3],  # –û–±–µ—Å—Ü–µ–Ω–∏–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤
        "gaslighting_q3": [3],  # –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –±–µ—Ä–µ—Ç –≤–∏–Ω—É –Ω–∞ —Å–µ–±—è
        "emotion_q1": [3],  # –í—Å–ø—ã—à–∫–∏ —è—Ä–æ—Å—Ç–∏ —Å —É–≥—Ä–æ–∑–∞–º–∏
        "intimacy_q1": [3],  # –ü—Ä–∏–Ω—É–∂–¥–µ–Ω–∏–µ –≤ –∏–Ω—Ç–∏–º–Ω–æ—Å—Ç–∏
        "social_q1": [3]   # –ö–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ —Ä–∞–∑–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–æ–º–∞/–Ω–∞ –ø—É–±–ª–∏–∫–µ
    }
    
    alert_messages = {
        "control_q1": "‚ö†Ô∏è –ö–û–ù–¢–†–û–õ–¨ –í–†–ï–ú–ï–ù–ò: –ü–∞—Ä—Ç–Ω–µ—Ä –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –∫–∞–∂–¥—ã–π –≤–∞—à —à–∞–≥",
        "control_q2": "‚ö†Ô∏è –ò–ó–û–õ–Ø–¶–ò–Ø: –ü–∞—Ä—Ç–Ω–µ—Ä –∏–∑–æ–ª–∏—Ä—É–µ—Ç –≤–∞—Å –æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–µ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è",
        "control_q4": "‚ö†Ô∏è –§–ò–ù–ê–ù–°–û–í–û–ï –ü–†–ò–ù–£–ñ–î–ï–ù–ò–ï: –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –≤–∞—à–∏–º–∏ –¥–µ–Ω—å–≥–∞–º–∏",
        "control_q5": "‚ö†Ô∏è –ù–ê–†–£–®–ï–ù–ò–ï –ì–†–ê–ù–ò–¶: –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –≤–∞—à–∏ –≥—Ä–∞–Ω–∏—Ü—ã",
        "control_q7": "üö® –£–ì–†–û–ó–´: –ü–∞—Ä—Ç–Ω–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–∞–ø—É–≥–∏–≤–∞–Ω–∏–µ –∏ —É–≥—Ä–æ–∑—ã",
        "gaslighting_q1": "üö® –ì–ê–ó–õ–ê–ô–¢–ò–ù–ì: –°–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–∫–∞–∂–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏",
        "gaslighting_q2": "‚ö†Ô∏è –≠–ú–û–¶–ò–û–ù–ê–õ–¨–ù–û–ï –ù–ê–°–ò–õ–ò–ï: –û–±–µ—Å—Ü–µ–Ω–∏–≤–∞–Ω–∏–µ –≤–∞—à–∏—Ö —á—É–≤—Å—Ç–≤",
        "gaslighting_q3": "‚ö†Ô∏è –û–¢–°–£–¢–°–¢–í–ò–ï –û–¢–í–ï–¢–°–¢–í–ï–ù–ù–û–°–¢–ò: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–∏–∑–Ω–∞–µ—Ç –≤–∏–Ω—É",
        "emotion_q1": "üö® –§–ò–ó–ò–ß–ï–°–ö–ê–Ø –£–ì–†–û–ó–ê: –ù–µ–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–µ –≤—Å–ø—ã—à–∫–∏ —è—Ä–æ—Å—Ç–∏",
        "intimacy_q1": "üö® –ü–†–ò–ù–£–ñ–î–ï–ù–ò–ï: –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–≥–ª–∞—Å–∏—è –≤ –∏–Ω—Ç–∏–º–Ω–æ—Å—Ç–∏",
        "social_q1": "‚ö†Ô∏è –î–í–û–ô–ù–ê–Ø –õ–ò–ß–ù–û–°–¢–¨: –ö–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ —Ä–∞–∑–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ"
    }
    
    for question_id, critical_answers in critical_patterns.items():
        answer_index = answers.get(question_id)
        if answer_index in critical_answers:
            alert = alert_messages.get(question_id)
            if alert:
                alerts.append(alert)
    
    return alerts

def validate_full_answers(answers: Dict[str, int]) -> Tuple[bool, str]:
    """–í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –æ—Ç–≤–µ—Ç–æ–≤"""
    expected_questions = set(QUESTION_ORDER)
    provided_questions = set(answers.keys())
    
    if len(provided_questions) != len(expected_questions):
        missing = expected_questions - provided_questions
        if missing:
            return False, f"–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã: {', '.join(missing)}"
        
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –æ—Ç–≤–µ—Ç–æ–≤
    all_questions = get_all_questions()
    for question_id, answer_index in answers.items():
        question = all_questions.get(question_id)
        if not question:
            return False, f"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –≤–æ–ø—Ä–æ—Å: {question_id}"
            
        if not isinstance(answer_index, int) or answer_index < 0 or answer_index >= len(question['options']):
            return False, f"–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞ {question_id}: {answer_index}"
    
    return True, "–í—Å–µ –æ—Ç–≤–µ—Ç—ã –≤–∞–ª–∏–¥–Ω—ã" 