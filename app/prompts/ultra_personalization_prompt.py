"""
Финальный ультра-персонализированный промпт для максимальной детализации
"""

def create_ultra_personalized_prompt_final(answers_text: str, partner_name: str, partner_description: str) -> str:
    """Создает финальный максимально персонализированный промпт"""
    
    return f"""
ЗАДАЧА: Создай МАКСИМАЛЬНО ДЕТАЛЬНЫЙ психологический профиль партнера на основе КОНКРЕТНЫХ ответов пользователя.

ВХОДНЫЕ ДАННЫЕ:
Партнер: {partner_name}
Описание: {partner_description}

ОТВЕТЫ ПОЛЬЗОВАТЕЛЯ О ПОВЕДЕНИИ ПАРТНЕРА:
{answers_text}

ТРЕБОВАНИЯ:
1. ИСПОЛЬЗУЙ ТОЛЬКО КОНКРЕТНЫЕ ПРИМЕРЫ из ответов
2. НЕ ИСПОЛЬЗУЙ общие фразы 
3. Психологический профиль должен быть МИНИМУМ 3000 слов
4. Каждое утверждение подкрепляй цитатами из ответов
5. Создавай персонализированные инсайты на основе конкретного поведения

СТРУКТУРА ОТВЕТА:

{{
  "personality_type": "Детальный тип личности с научным обоснованием (200+ слов)",
  "psychological_profile": "МАКСИМАЛЬНО ДЕТАЛЬНЫЙ психологический портрет с конкретными примерами (МИНИМУМ 3000 слов). ОБЯЗАТЕЛЬНО используй цитаты из ответов пользователя: 'например, пользователь говорит...' или 'как видно из ответа...'",
  "red_flags": [
    "КОНКРЕТНЫЙ красный флаг с цитатой из ответа",
    "КОНКРЕТНЫЙ красный флаг с цитатой из ответа",
    "КОНКРЕТНЫЙ красный флаг с цитатой из ответа",
    "КОНКРЕТНЫЙ красный флаг с цитатой из ответа",
    "КОНКРЕТНЫЙ красный флаг с цитатой из ответа",
    "КОНКРЕТНЫЙ красный флаг с цитатой из ответа",
    "КОНКРЕТНЫЙ красный флаг с цитатой из ответа",
    "КОНКРЕТНЫЙ красный флаг с цитатой из ответа"
  ],
  "personalized_insights": [
    "ПЕРСОНАЛИЗИРОВАННЫЙ инсайт с конкретным примером из ответа",
    "ПЕРСОНАЛИЗИРОВАННЫЙ инсайт с конкретным примером из ответа", 
    "ПЕРСОНАЛИЗИРОВАННЫЙ инсайт с конкретным примером из ответа",
    "ПЕРСОНАЛИЗИРОВАННЫЙ инсайт с конкретным примером из ответа",
    "ПЕРСОНАЛИЗИРОВАННЫЙ инсайт с конкретным примером из ответа",
    "ПЕРСОНАЛИЗИРОВАННЫЙ инсайт с конкретным примером из ответа",
    "ПЕРСОНАЛИЗИРОВАННЫЙ инсайт с конкретным примером из ответа",
    "ПЕРСОНАЛИЗИРОВАННЫЙ инсайт с конкретным примером из ответа"
  ],
  "behavioral_evidence": [
    "КОНКРЕТНОЕ поведенческое доказательство с цитатой",
    "КОНКРЕТНОЕ поведенческое доказательство с цитатой",
    "КОНКРЕТНОЕ поведенческое доказательство с цитатой",
    "КОНКРЕТНОЕ поведенческое доказательство с цитатой",
    "КОНКРЕТНОЕ поведенческое доказательство с цитатой",
    "КОНКРЕТНОЕ поведенческое доказательство с цитатой",
    "КОНКРЕТНОЕ поведенческое доказательство с цитатой",
    "КОНКРЕТНОЕ поведенческое доказательство с цитатой",
    "КОНКРЕТНОЕ поведенческое доказательство с цитатой",
    "КОНКРЕТНОЕ поведенческое доказательство с цитатой"
  ],
  "manipulation_tactics": [
    "КОНКРЕТНАЯ тактика манипуляции с примером из ответов",
    "КОНКРЕТНАЯ тактика манипуляции с примером из ответов",
    "КОНКРЕТНАЯ тактика манипуляции с примером из ответов",
    "КОНКРЕТНАЯ тактика манипуляции с примером из ответов",
    "КОНКРЕТНАЯ тактика манипуляции с примером из ответов"
  ],
  "control_mechanisms": [
    "КОНКРЕТНЫЙ механизм контроля с цитатой из ответа",
    "КОНКРЕТНЫЙ механизм контроля с цитатой из ответа",
    "КОНКРЕТНЫЙ механизм контроля с цитатой из ответа",
    "КОНКРЕТНЫЙ механизм контроля с цитатой из ответа"
  ],
  "emotional_patterns": [
    "КОНКРЕТНЫЙ эмоциональный паттерн с примером",
    "КОНКРЕТНЫЙ эмоциональный паттерн с примером",
    "КОНКРЕТНЫЙ эмоциональный паттерн с примером",
    "КОНКРЕТНЫЙ эмоциональный паттерн с примером"
  ],
  "violence_indicators": [
    "КОНКРЕТНЫЙ индикатор насилия с цитатой",
    "КОНКРЕТНЫЙ индикатор насилия с цитатой",
    "КОНКРЕТНЫЙ индикатор насилия с цитатой",
    "КОНКРЕТНЫЙ индикатор насилия с цитатой"
  ],
  "escalation_triggers": [
    "КОНКРЕТНЫЙ триггер эскалации с примером",
    "КОНКРЕТНЫЙ триггер эскалации с примером",
    "КОНКРЕТНЫЙ триггер эскалации с примером",
    "КОНКРЕТНЫЙ триггер эскалации с примером"
  ],
  "safety_alerts": [
    "КОНКРЕТНОЕ предупреждение о безопасности",
    "КОНКРЕТНОЕ предупреждение о безопасности",
    "КОНКРЕТНОЕ предупреждение о безопасности"
  ],
  "manipulation_risk": 8.5,
  "urgency_level": "high",
  "block_scores": {{
    "narcissism": 9.0,
    "control": 9.5,
    "gaslighting": 8.5,
    "emotion": 8.0,
    "intimacy": 7.5,
    "social": 9.0
  }}
}}

ПРИМЕР ПРАВИЛЬНОГО ИСПОЛЬЗОВАНИЯ ЦИТАТ:
"Как показывает ответ пользователя: 'Александр всегда начинает кричать, если я что-то говорю ему', это демонстрирует паттерн агрессивной реакции на любую критику..."

СОЗДАЙ МАКСИМАЛЬНО ДЕТАЛЬНЫЙ АНАЛИЗ С ОБЯЗАТЕЛЬНЫМ ИСПОЛЬЗОВАНИЕМ КОНКРЕТНЫХ ПРИМЕРОВ ИЗ ОТВЕТОВ!

ВЕРНИ ТОЛЬКО JSON!
"""

def create_simplified_system_prompt() -> str:
    """Создает упрощенный системный промпт для максимальной детализации"""
    return """Ты - ведущий эксперт по психологическому профайлингу с 20-летним опытом работы с абьюзивными отношениями.

ТВОЯ ЗАДАЧА: Создать максимально детальный и персонализированный психологический профиль на основе КОНКРЕТНЫХ примеров поведения.

ПРИНЦИПЫ:
1. Используй ТОЛЬКО конкретные факты из предоставленных ответов
2. Каждое утверждение подкрепляй цитатами
3. Избегай общих фраз - только персонализированный анализ
4. Создавай детальный психологический профиль минимум 3000 слов
5. Возвращай ТОЛЬКО JSON без дополнительного текста

ФОКУС: Максимальная персонализация на основе конкретных примеров поведения.""" 